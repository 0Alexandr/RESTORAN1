# RESTORAN1 — Система управления рестораном

## RESTORAN1
Это полноценное кроссплатформенное desktop-приложение для автоматизации работы ресторана, разработанное на `.NET 9` с использованием `Avalonia UI`. Проект включает управление столами, бронированиями, меню, заказами и статистикой, с сохранением данных в `JSON`. Приложение имеет интуитивный интерфейс с вкладками и диалоговыми окнами.

## Описание
Приложение представляет собой менеджер ресторана с графическим интерфейсом. Оно позволяет:  
* Добавлять, редактировать и удалять столы, блюда, брони и заказы.  
* Просматривать информацию и статистику.  
* Работать с виртуальным временем для тестирования сценариев.  
* Автоматически сохранять и загружать данные в JSON-файлы.

Проект структурирован: UI в XAML, логика в C#, модели данных в отдельном классе. Поддерживает кроссплатформенность (Windows, Linux, macOS).

## Функции
1. **Столы**

* Добавление, редактирование, удаление столов.
* Просмотр информации о столе, включая расписание бронирований.

2. **Бронирования**

* Создание брони с указанием клиента, стола, времени и комментария.
* Редактирование, отмена, продление брони.
* Поиск по имени или телефону.
* Проверка на перекрытия времени.

3. **Меню (Блюда)**

* Добавить, редактировать, удалить блюдо.
* CRUD операций с блюдами (название, состав, вес, цена, категория, время готовки).
* Категории блюд (enum: Напитки, Салаты и т.д.).

4. **Заказы**

* Создание заказа для клиента за столом (с проверкой брони).
* Добавление позиций (блюда + количество).
* Закрытие заказа с расчётом суммы.
* Удаление заказов.

5. **Статистика и Настройки**

* Сумма закрытых заказов.
* Чек клиента.
* Статистика популярных блюд.
* Выбор папки данных, сохранение/загрузка, очистка.
* Генерация тестовых данных.
* Установка виртуального времени.

**Дополнительно**

* Диалоговые окна для ввода, сообщений и подтверждений.
* Асинхронная работа с UI (Dispatcher).
* Безопасная обработка null (nullable types, ?., !).

## Архитектура

Проект построен по принципу **разделения UI и бизнес-логики**. Всё взаимодействие с данными происходит через `RestoranManager`, а пользовательский интерфейс полностью описан в XAML-файлах.


| Файл | Роль |
|------|------|
| **Program.cs** | Точка входа. Настраивает `AppBuilder`, включает платформенные сервисы (`UsePlatformDetect`, `UseReactiveUI`). |
| **App.axaml** | Корневой XAML-файл приложения. Определяет глобальные стили (`FluentTheme`). |
| **App.axaml.cs** | Инициализирует Avalonia (`AvaloniaXamlLoader.Load`), создаёт `MainWindow` при запуске `IClassicDesktopStyleApplicationLifetime`. |
| **MainWindow.axaml** | UI-слой: `TabControl` с 5 вкладками, `DataGrid`, `Button`, `TextBlock`. Вся разметка, без кода. |
| **MainWindow.axaml.cs** | Code-behind: обработчики `Click`, диалоговые окна (`InputDialog`, `MessageDialog`, `ConfirmDialog`), обновление `ItemsSource` через `Dispatcher.UIThread`, вызовы методов `RestoranManager`. |
| **RestoranManager.cs** | Бизнес-логика и модели (`Table`, `Reservation`, `Dish`, `Order`, `OrderItem`). Сериализация/десериализация в `data.json`, генерация тестовых данных, проверка конфликтов брони, расчёт суммы заказов, виртуальное время (`VirtualNow`). |

**Ключевые принципы**  
- **Nullable Reference Types** (`enable`) – защита от `null`.  
- **Асинхронные диалоги** (`async/await`).  
- **Автоматическое сохранение** при каждом изменении (`SaveAll()`).  
- **`data.json` не в репозитории** (игнорируется `.gitignore`).  

## Что нужно, чтобы проект работал на другом ПК

| Шаг | Команда |
|------|------|
| **1. Установить .NET 9 SDK** | Скачать: https://dotnet.microsoft.com/download/dotnet/9.0 |
| **2. Клонировать** | `git clone https://github.com/0Alexandr/RESTORAN1.git` |
| **3. Перейти в папку** | `cd RESTORAN1` |
| **4. Восстановить** | `dotnet restore` |
| **5. Запустить** | `dotnet run` |

## Советы, что добавить

1. `Карту расположения столов` в ресторане **ИЛИ** `Текстовое поле с 3 таблицами:` 1 - название расположения стола, 2 - количество мест, 3 - свободно/занято.
2. `Карта Меню` **ИЛИ** `Текстовое поле с 4 таблицами:` 1 - название меню, 2 - состав блюда, 3 - объем/вес, 4 - цена.
